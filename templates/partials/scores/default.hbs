{{!-- This is the default template for engraving a score. --}}
\score {

    {{#if transpose~}}
    \transpose {{{transpose}}}
    {{/if~}}

    {{ whichGrouping grouping }}
    <<
    {{!-- Data will always have a 'layout' array with at least one item --}}
    {{#each layout}}
        {{!-- Each 'layout' array object will have at least one key/value 
              pair mapping a list of the type(s) of staff that should be used
              to render it --}}     
        {{#each this}}
            {{!-- In this context `@key` = the part name, and `this` = the array of
                  staff type(s) should be used to display the part --}}
            {{#each this}}
                {{!-- In this context `this` is an array element describing which 
                      staff type should be added to the score for the parent part --}}
                {{> (whichStave this) partName=@../key }}
            {{/each}}
        {{/each}}
    {{/each}}
    >>
    \layout {}
    {{!-- Display anything left from the input file after `part` tags were processed: --}}
    {{{input}}}
}
